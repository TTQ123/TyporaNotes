# Vue2

## 1.vue是什么

![image-20230814163453506](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814163453506.png)

![image-20230814163623307](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814163623307.png)



### 1.Vue实例

![image-20230814220326676](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814220326676.png)



### 2.差值表达式

![image-20230814221524306](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814221524306.png)



### 3.响应性数据

![image-20230814222849718](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814222849718.png)

![image-20230814222924906](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814222924906.png)



### 4.开发者调试工具

![image-20230814224246303](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814224246303.png)

**data的值不能是全中文的，不然在vue调试工具是不能显示的**

## 

## 2.vue指令

### 1.v-html

![image-20230814225503014](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814225503014.png)

![image-20230814225440172](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814225440172.png)

### 

### 2.v-show和v-if

![image-20230814225938647](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814225938647.png)



### 3.v-else 和 v-else-if

![image-20230814230328875](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814230328875.png)

![image-20230814230341349](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814230341349.png)



### 4.v-on

![image-20230814231114383](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814231114383.png)

**vue2中，data声明的数据(选项式API)只能在模板中直接使用，无法在methods中使用，需要通过 `实例.数据` 或者 `this.数据` 来获取**

![image-20230814232043669](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814232043669.png)

**v-on参数传递**

![image-20230814233338386](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814233338386.png)





#### 1.vue2和vue3中this的区别

**VUE3中已经没有了this，因为他用的是组合式API，想要this可以用ref去代替获取到数据的值，或者是getCurrentInstance（）方法，这个方法返回了ctx和proxy**

![image-20230814232841350](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814232841350.png)

![image-20230814232924467](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814232924467.png)

![image-20230814232931803](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230814232931803.png)



### 5.v-bind

![image-20230815002417092](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815002417092.png)

**v-bind更多的还是用在父子组件传值**

#### 1.v-bind原理

![image-20230815204932840](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815204932840.png)



### 6.v-for

![image-20230815193800694](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815193800694.png)

**`v-for`的默认行为会尝试原地修改元素(就地复用)**

![image-20230815202811035](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815202811035.png)

```bash
如果我们不加key，他会把最后一个删除，然后把其它的往前面推。
```



### 7.v-model

![image-20230815203439655](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815203439655.png)

![image-20230815203501447](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815203501447.png)

#### 1.vue2中v-model原理

![image-20230815204412500](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815204412500.png)

```apl
v-bind绑定了双向数据,这样完成第一步 数据变化-->视图更新
@input事件完成第二步 视图变化-->数据更新
```



#### 2.vue3中v-model原理

![image-20230815204432257](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815204432257.png)



### 8.第一天案例:记事本

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #app {
            width: 400px;
            margin: 50px auto;
        }
    </style>
</head>

<body>
    <div id="app">
        <header class="header">
            <h1>小黑记事本</h1>
            <input type="text" placeholder="请输入任务" class="new-todo" v-model="todoName">
            <button class="add" @click="add">添加任务</button>
        </header>
        <section class="main">
            <ul class="todo-list">
                <li class="todo" v-for="(item,index) in list">
                    <div class="view">
                        <!-- 用index不会影响序号 -->
                        <span class="index">{{index + 1}}</span> <label>{{item.name}}</label>
                        <button class="destroy" @click="del(item.id)">删除任务</button>
                    </div>
                </li>
            </ul>
        </section>
        <footer class="footer" v-show="list.length > 0">
            <div class="todo-count">
                合 计:<strong> {{list.length}} </strong>
                <button class="clear-complated" @click="delAll">清空任务</button>
            </div>
            
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                todoName:'',
                list: [
                    { id: 1, name: '跑步一公里' },
                    { id: 2, name: '跳绳一百次' },
                    { id: 3, name: '跳远十次' }
                ]
            },
            methods: {
                del(id) {
                    this.list = this.list.filter(item => item.id !== id)
                },
                add(){
                    if (this.todoName.trim() === '') {
                        alert('请输入任务名称')
                        return
                    }
                    this.list.unshift({
                        id:new Date(),
                        name:this.todoName
                    })
                    this.todoName = ''
                },

                delAll(){
                    this.list = []
                }
            }
        })
    </script>
</body>

</html>
```



### 9.指令的修饰符

![image-20230815220627608](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815220627608.png)

**修饰符原理**

![image-20230815221048560](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815221048560.png)

**@事件名.stop的原理**

![image-20230815221341970](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815221341970.png)



### 10.v-bind对于css样式的控制(操作css和style)

#### 1.操作css

![image-20230815221829159](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815221829159.png)

**这个clss是在style样式里面声明了，可以直接拿来用**

**例子**

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .active {
            color: pink;
        }
    </style>
</head>

<body>
    <div id="app">
       <ul>
        <li v-for="(item,index) in list" :key="item.id" @mouseover="activeIndex = index">
            <a :class="{active: index === activeIndex}">{{item.name}}</a>
        </li>
       </ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                activeIndex:0,
                list: [
                    { id: 1, name: '京东秒杀' },
                    { id: 2, name: '百度秒杀' },
                    { id: 3, name: '苦瓜秒杀' }
                ]
            },
            methods: {
               
            }
        })
    </script>
</body>

</html>
```



#### 2.操作style

![image-20230815223633057](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815223633057.png)

![image-20230815223603274](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815223603274.png)

### 11.v-model应用于其它表单元素

![image-20230815230255021](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815230255021.png)

![image-20230815230308602](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815230308602.png)

![image-20230815230322284](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815230322284.png)



## 3.vue计算属性

### 1.简介

![image-20230815231130840](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815231130840.png)

![image-20230815231031536](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815231031536.png)



### 2.computer和methods的差异

![image-20230815231552012](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815231552012.png)

![image-20230815231415682](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815231415682.png)



### 3.计算属性的完整写法(读取和修改)

![image-20230815231733101](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230815231733101.png)

例子：计算属性的获取和修改

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <div>
            姓:<span>{{firstName}}</span>+名:<span>{{lastName}}</span> = {{fullName}}
            <br>
            <button  @click="changeName">改名</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
               firstName:'刘',
               lastName:'备'
            },
            methods: {
               changeName(){
                this.fullName = '张飞'
               }
            },
            computed:{
                fullName:{
                    get(){
                        return this.firstName + this.lastName
                    },
                    set(value){
                        // 当点击了事件changeName fullName将被修改同时传给set的value形参
                        this.firstName = value.slice(0,1)
                        this.lastName = value.slice(1)
                    }
                }

            }
        })
    </script>
</body>

</html>
```



### 4.第二天案例:成绩案例

![image-20230816002534273](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230816002534273.png)

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./index.css" />
    <title>Document</title>
</head>

<body>
    <div id="app" class="score-case">
        <div class="table">
            <table>
                <thead>
                    <tr>
                        <th>编号</th>
                        <th>科目</th>
                        <th>成绩</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody v-if="list.length > 0">
                    <tr v-for="(item,index) in list" :key="item.id">
                        <td>{{index+1}}</td>
                        <td>{{item.subject}}</td>
                        <td :class="{red: item.score < 60}">{{item.score}}</td>
                        <td><a @click.prevent="del(item.id)" href="#">删除</a></td>
                    </tr>
                </tbody>
                <tbody v-else>
                    <tr>
                        <td colspan="4">
                            <span class="none">暂无数据</span>
                        </td>
                    </tr>
                </tbody>

                <tfoot>
                    <tr>
                        <td colspan="4">
                            <span>总分:{{totalScore}}</span>
                            <span style="margin-left: 50px">平均分:{{totalAvg}}</span>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="form">
            <div class="form-item">
                <div class="label">科目:</div>
                <div class="input">
                    <input type="text" placeholder="请输入科目" v-model.trim="subject" />
                </div>
            </div>
            <div class="form-item">
                <div class="label">分数:</div>
                <div class="input">
                    <input type="text" placeholder="请输入分数" v-model.number="score" />
                </div>
            </div>
            <div class="form-item">
                <div class="label"></div>
                <div class="input">
                    <button class="submit" @click="add">添加</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

    <script>
        const app = new Vue({
            el: '#app',
            data: {
                list: [
                    { id: 1, subject: '语文', score: 20 },
                    { id: 7, subject: '数学', score: 99 },
                    { id: 12, subject: '英语', score: 70 },
                ],
                subject: '',
                score: ''
            },
            methods: {
                del(id) {
                    // item就是遍历的整个数组 相等的那个被删除了
                    this.list = this.list.filter(item => item.id !== id)
                },
                add() {
                    if (!this.subject) {
                        alert('请输入科目')
                    }
                    if (typeof this.score !== 'number') {
                        alert('请输入正确的内容')
                        return
                    }
                    this.list.unshift({
                        id: +new Date(),
                        subject: this.subject,
                        score: this.score
                    })
                    this.subject = ''
                    this.score = ''
                }
            },
            computed: {
                // 计算总分
                totalScore() {
                    // 第一项是计算总分，第二项是从0开始的意思
                    return this.list.reduce((sum, item) => sum + item.score, 0)
                },
                // 计算平均分
                totalAvg() {
                    // 总分为0 平均分也为0
                    if (this.totalScore === 0) {
                        return 0
                    }
                    return (this.totalScore / this.list.length).toFixed(2)
                }

            }
        })
    </script>
</body>

</html>
```



## 4.watch侦听器

### 1.watch简写 监听简单数据类型

![image-20230816004920526](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230816004920526.png)

### 2.watch完整写法 监听复杂类型

![uTools_1692118075672](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692118075672.png)

![uTools_1692118054267](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692118054267.png)

### 3.例子 实时翻译功能

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-size: 18px;
        }

        #app {
            padding: 10px 20px;
        }

        .query {
            margin: 10px 0;
        }

        .box {
            display: flex;
        }

        textarea {
            width: 300px;
            height: 160px;
            font-size: 18px;
            border: 1px solid #dedede;
            outline: none;
            resize: none;
            padding: 10px;
        }

        textarea:hover {
            border: 1px solid #1589f5;
        }

        .transbox {
            width: 300px;
            height: 160px;
            background-color: #f0f0f0;
            padding: 10px;
            border: none;
        }

        .tip-box {
            width: 300px;
            height: 25px;
            line-height: 25px;
            display: flex;
        }

        .tip-box span {
            flex: 1;
            text-align: center;
        }

        .query span {
            font-size: 18px;
        }

        .input-wrap {
            position: relative;
        }

        .input-wrap span {
            position: absolute;
            right: 15px;
            bottom: 15px;
            font-size: 12px;
        }

        .input-wrap i {
            font-size: 20px;
            font-style: normal;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- 条件选择框 -->
        <div class="query">
            <span>翻译成的语言：</span>
            <select v-model="obj.lang">
                <option value="italy">意大利</option>
                <option value="english">英语</option>
                <option value="german">德语</option>
            </select>
        </div>

        <!-- 翻译框 -->
        <div class="box">
            <div class="input-wrap">
                <textarea v-model="obj.words"></textarea>
                <span><i>⌨️</i>文档翻译</span>
            </div>
            <div class="output-wrap">
                <div class="transbox">{{ result }}</div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // 需求：输入内容，修改语言，都实时翻译

        // 接口地址：https://applet-base-api-t.itheima.net/api/translate
        // 请求方式：get
        // 请求参数：
        // （1）words：需要被翻译的文本（必传）
        // （2）lang： 需要被翻译成的语言（可选）默认值-意大利

        const app = new Vue({
            el: '#app',
            data: {
                // 复杂数据类型 对象类型
                obj: {
                    words: '小黑',
                    lang: 'italy'
                },
                result: '', // 翻译结果
            },

            watch: {
                obj: {
                    deep: true,//深度监视
                    immediate: true, // 立刻执行，一进入页面handler就立刻执行一次
                    // 作用是给word一个默认值，第一次进页面不会自动翻译一次(handler不执行，数据变化了才执行)
                    handler(newValue) {
                        // 开启防抖:延迟执行(输入肯定有多次不要一直执行,一段时间后在执行)
                        clearTimeout(this.timer) //如果在300毫秒内输入了,那么我们要删除前面那个定时器
                        // 不然时间到了还是会执行，控制台会执行多次(我们只要一次)
                        this.timer = setTimeout(async () => {
                            // axios发送请求
                            const res = await axios({
                                url: 'https://applet-base-api-t.itheima.net/api/translate',
                                params: newValue //newValue其实就是整个obj对象,直接传给参数进行网络请求
                            })
                            this.result = res.data.data //获取到的值显示到翻译栏
                            console.log(res.data.data)
                        }, 300)
                    }
                }
            }
              // watch简单写法  
              // 'obj.words' (newValue) {
              //   clearTimeout(this.timer)
              //   this.timer = setTimeout(async () => {
              //     const res = await axios({
              //       url: 'https://applet-base-api-t.itheima.net/api/translate',
              //       params: {
              //         words: newValue
              //       }
              //     })
              //     this.result = res.data.data
              //     console.log(res.data.data)
              //   }, 300)
              // }
        })
    </script>
</body>

</html>
```



### 4.综合例子:购物商城

![image-20230816021746216](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230816021746216.png)

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/inputnumber.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <title>购物车</title>
</head>

<body>
    <div class="app-container" id="app">
        <!-- 顶部banner -->
        <div class="banner-box"><img src="http://autumnfish.cn/static/fruit.jpg" alt="" /></div>
        <!-- 面包屑 -->
        <div class="breadcrumb">
            <span>🏠</span>
            /
            <span>购物车</span>
        </div>
        <!-- 购物车主体 -->
        <div class="main" v-if="fruitList.length > 0">
            <div class="table">
                <!-- 头部 -->
                <div class="thead">
                    <div class="tr">
                        <div class="th">选中</div>
                        <div class="th th-pic">图片</div>
                        <div class="th">单价</div>
                        <div class="th num-th">个数</div>
                        <div class="th">小计</div>
                        <div class="th">操作</div>
                    </div>
                </div>
                <!-- 身体 -->
                <div class="tbody">
                    <div class="tr" :class="{active:item.isChecked}" v-for="(item,index) in fruitList" :key="item.id">
                        <div class="td"><input type="checkbox" v-model="item.isChecked" /></div>
                        <div class="td"><img :src="item.icon" /></div>
                        <div class="td">{{ item.price }}</div>
                        <div class="td">
                            <div class="my-input-number">
                                <button class="decrease" @click="sub(item.id)" :disabled="item.num <= 1"> - </button>
                                <span class="my-input__inner">{{item.num}}</span>
                                <button class="increase" @click="add(item.id)"> + </button>
                            </div>
                        </div>
                        <div class="td"> {{ item.num * item.price }}</div>
                        <div class="td"><button @click="del(item.id)">删除</button></div>
                    </div>
                </div>
            </div>
            <!-- 底部 -->
            <div class="bottom">
                <!-- 全选 -->
                <label class="check-all">
                    <input type="checkbox" v-model="isAll" />
                    全选
                </label>
                <div class="right-box">
                    <!-- 所有商品总价 -->
                    <span class="price-box">总价&nbsp;&nbsp;:&nbsp;&nbsp;¥&nbsp;<span class="price">{{ totalPrice
                            }}</span></span>
                    <!-- 结算按钮 -->
                    <button class="pay">结算( {{ totalCount }} )</button>
                </div>
            </div>
        </div>
        <!-- 空车 -->
        <div class="empty" v-else>🛒空空如也</div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script>
        // 默认的值
        const defaultArr = [
            {
                id: 1,
                icon: 'http://autumnfish.cn/static/火龙果.png',
                isChecked: true,
                num: 2,
                price: 6,
            },
            {
                id: 2,
                icon: 'http://autumnfish.cn/static/荔枝.png',
                isChecked: false,
                num: 7,
                price: 20,
            },
            {
                id: 3,
                icon: 'http://autumnfish.cn/static/榴莲.png',
                isChecked: false,
                num: 3,
                price: 40,
            },
            {
                id: 4,
                icon: 'http://autumnfish.cn/static/鸭梨.png',
                isChecked: true,
                num: 10,
                price: 3,
            },
            {
                id: 5,
                icon: 'http://autumnfish.cn/static/樱桃.png',
                isChecked: false,
                num: 20,
                price: 34,
            },
        ]
        const app = new Vue({
            el: '#app',
            data: {
                // 水果列表从本地存储去取(转为字符串) 没有值的时候就是被用户删除玩了 直接去取默认值
                fruitList: JSON.parse(localStorage.getItem('list')) || defaultArr
            },
            computed: {
                isAll: {
                    get() {
                        // 必须所有小选框都选择,全选按钮才选中 every
                        // 所有item.isChecked为true
                        return this.fruitList.every(item => item.isChecked)
                    },
                    // set可以拿到isAll被修改的值 当你重复勾选按钮就是在修改值传递给value
                    set(value) {
                        console.log(value);
                        // value拿到的就是isAll的值是true还是false
                        // foreach用来遍历整个数组执行一次cb函数
                        this.fruitList.forEach(item => item.isChecked = value)
                    }
                },
                // 统计选中的总数 reduce
                totalCount() {
                    return this.fruitList.reduce((sum, item) => {
                        if (item.isChecked) {
                            // 选中 → 需要累加
                            return sum + item.num
                        } else {
                            // 没选中 → 不需要累加
                            return sum
                        }
                    }, 0)
                },
                // 统计选中的总价
                totalPrice() {
                    return this.fruitList.reduce((sum, item) => {
                        if (item.isChecked) {
                            // 选中 → 需要累加
                            return sum + item.num * item.price
                        } else {
                            // 没选中 → 不需要累加
                            return sum
                        }
                    }, 0)
                }
            },
            watch: {
                fruitList:{
                    deep: true,
                    handler(newValue) {
                        // 将变化的newValue存入本地（转为JSON）
                        localStorage.setItem('list', JSON.stringify(newValue))
                    }
                }
            },

            methods: {
                del(id) {
                    this.fruitList = this.fruitList.filter(item => item.id !== id)
                },
                sub(id) {
                    //1.根据id 找到数组的对应项 find
                    const fruit = this.fruitList.find(item => item.id === id)
                    //2.修改num值
                    fruit.num--
                },
                add(id) {
                    //1.根据id 找到数组的对应项 find
                    const fruit = this.fruitList.find(item => item.id === id)
                    //2.修改num值
                    fruit.num++
                }
            }
        })
    </script>
</body>

</html>
```



## 5.vue2生命周期

### 1.简介

![image-20230817005605725](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817005605725.png)



### 2.生命周期钩子函数

![image-20230817010756925](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817010756925.png)

**例子**

![image-20230817011110254](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817011110254.png)

![image-20230817011430443](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817011430443.png)



### 3.created应用 进入页面就开始请求数据

![image-20230817011816505](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817011816505.png)

#### 1.补充:前端接收的数据

![image-20230817012040278](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817012040278.png)

![image-20230817012055209](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817012055209.png)



### 4.mounted 进入页面获取鼠标焦点

 ![image-20230817012523575](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817012523575.png)



### 5.通过Echarts完成小黑记账清单

![image-20230817022832467](C:\Users\ttq\AppData\Roaming\Typora\typora-user-images\image-20230817022832467.png)

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <!-- CSS only -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
  <style>
    .red {
      color: red !important;
    }

    .search {
      width: 300px;
      margin: 20px 0;
    }

    .my-form {
      display: flex;
      margin: 20px 0;
    }

    .my-form input {
      flex: 1;
      margin-right: 20px;
    }

    .table> :not(:first-child) {
      border-top: none;
    }

    .contain {
      display: flex;
      padding: 10px;
    }

    .list-box {
      flex: 1;
      padding: 0 30px;
    }

    .list-box a {
      text-decoration: none;
    }

    .echarts-box {
      width: 600px;
      height: 400px;
      padding: 30px;
      margin: 0 auto;
      border: 1px solid #ccc;
    }

    tfoot {
      font-weight: bold;
    }

    @media screen and (max-width: 1000px) {
      .contain {
        flex-wrap: wrap;
      }

      .list-box {
        width: 100%;
      }

      .echarts-box {
        margin-top: 30px;
      }
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="contain">
      <!-- 左侧列表 -->
      <div class="list-box">

        <!-- 添加资产 -->
        <form class="my-form">
          <input type="text" class="form-control" placeholder="消费名称" v-model.trim="name" />
          <input type="text" class="form-control" placeholder="消费价格"  v-model.number="price"/>
          <button type="button" class="btn btn-primary" @click="add">添加账单</button>
        </form>

        <table class="table table-hover">
          <thead>
            <tr>
              <th>编号</th>
              <th>消费名称</th>
              <th>消费价格</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(item,index) in list" :key="item.id">
              <td>{{index+1}}</td>
              <td>{{item.name}}</td>
              <td :class="{red:item.price>500}">{{item.price.toFixed(2)}}</td>
              <td><a href="javascript:;" @click="del(item.id)">删除</a></td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="4">消费总计： {{totalPrice}}</td>
            </tr>
          </tfoot>
        </table>
      </div>

      <!-- 右侧图表 -->
      <div class="echarts-box" id="main"></div>
    </div>
  </div>
  <script src="../echarts.min.js"></script>
  <script src="../vue.js"></script>
  <script src="../axios.js"></script>
  <script>
    /**
     * 接口文档地址：
     * https://www.apifox.cn/apidoc/shared-24459455-ebb1-4fdc-8df8-0aff8dc317a8/api-53371058
     * 
     * 功能需求：
     * 功能需求：
       * 1. 基本渲染
       *    (1) 立刻发送请求获取数据 created
       *    (2) 拿到数据，存到data的响应式数据中
       *    (3) 结合数据，进行渲染 v-for
       *    (4) 消费统计 => 计算属性
       * 2. 添加功能
       *    (1) 收集表单数据 v-model
       *    (2) 给添加按钮注册点击事件，发送添加请求
       *    (3) 需要重新渲染(前端发送了请求，后端数据增加，前端重新渲染)
       * 3. 删除功能
       *    (1) 注册点击事件，传参传 id
       *    (2) 根据 id 发送删除请求
       *    (3) 需要重新渲染
       * 4. 饼图渲染
       *    (1) 初始化一个饼图 echarts.init(dom)(官方文档看一下就都会了)  mounted钩子实现
       *    (2) 根据数据实时更新饼图 echarts.setOption({ ... })
     */
    const app = new Vue({
      el: '#app',
      data: {
        list: [],
        name:'',
        price:''
      },
      created() {
        // 第一次进入发送请求
       this.getList()
      },

      mounted () {
          //1. 操作dom生成echarts实例 
          //由于我们在发送完请求还要调用setOption方法,所以可以把myChart挂载到实例this上,方便拿到
          this.myChart = echarts.init(document.querySelector('#main'))

          //2 操作实例方法生成饼图的初次模板（初始化内容标题模板等等,当你要更新数据时在调一次setOption方法）
          // 可以对照文档来设置格式
          this.myChart.setOption({
            // 大标题
            title: {
              text: '消费账单列表',
              left: 'center'
            },
            // 提示框
            tooltip: {
              trigger: 'item'
            },
            // 图例
            legend: {
              orient: 'vertical',
              left: 'left'
            },
            // 数据项
            series: [
              {
                name: '消费账单',
                type: 'pie',
                radius: '50%', // 半径
                data: [
                // data就是要动态设置的数据
                ],
                emphasis: {
                  itemStyle: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                  }
                }
              }
            ]
          })
        },
      computed:{
        totalPrice(){
          return this.list.reduce((sum,item) => sum + item.price,0)
        }
      },
      methods:{
        // 获取最新的列表是通用的方法统一封装
        async getList(){
          const res = await axios.get('https://applet-base-api-t.itheima.net/bill', {
          params: {
            creator: '黄老鼠'
          }
        })
        this.list = res.data.data
         
        // 发送完请求以后也要更新饼图 再调用一次setOption
        this.myChart.setOption({
          series:[
            {
              // 只有data是要更新的
              // {value:xx,name:xxx} 这是官网的data设置 所以我们通过map来转换处理数据
              data:this.list.map((item) => ({value:item.price,name:item.name}))
            }
          ]
        })

        },


        async add(){
          if (!this.name) {
            alert('请输入消费名称')
            return
          }
          if (!this.price) {
            alert('请输入消费价格')
            return
          }
          const res = await axios.post('https://applet-base-api-t.itheima.net/bill',{
            creator: '黄老鼠',
            name:this.name, //this.name就是表单输入的数据 因为做了双向数据绑定
            price:this.price
          })
          // 拉取后台最新的数据重新渲染
          this.getList()
          // 清空输入
          this.price = ''
          this.name = ''
        },
        // 删除方法
        async del(id){
          // 删除的方法参数直接在path上传递
          if(confirm('你确定删除吗')){
          const res = await axios.delete(`https://applet-base-api-t.itheima.net/bill/${id}`)
          }
          this.getList()
        }
      },


    })
  </script>
</body>

</html>
```



## 6.vue2工程化开发

### 1.vue2vue3工程化的不同点

```apl
vue3:vite->create-vue->pinia
vue2:webpack->vue-cli->vuex
```



### 2.基本使用(理解项目、如何创建项目)

**基于vue-cli创建项目**

![image-20230817173949222](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230817173949222.png)

![uTools_1692265492491](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692265492491.png)

**main.js入口文件**

![uTools_1692267039957](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692267039957.png)

![](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692267039957.png)

![uTools_1692265956688](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/uTools_1692265956688.png)



### 3.组件化开发

![image-20230818010057817](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818010057817.png)

![image-20230818010217040](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818010217040.png)

**vue2的template不能有多个，template里中也只能有一个根元素**

![image-20230818010449274](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818010449274.png)

![image-20230818010523377](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818010523377.png)



#### 1.普通组件的注册使用

##### 1.局部注册

**vscode中敲击<vue>一件生成组件三部分结构**

![image-20230818010821419](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818010821419.png)

![image-20230818011240088](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818011240088.png)

##### 2.全局注册

![image-20230818011409758](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818011409758.png)

![image-20230818011633721](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818011633721.png)

##### 3.vscode快捷键

```bash
1.1.shift+alt+左键多行编辑
2.大文件同时折叠 ctrl + k, ctrl + 0
3.2.大文件同时展开 ctrl + k, ctrl + j
```



#### 4.案例

![image-20230818013752471](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818013752471.png)



#### 5.组件的三大组成部分

##### 1.scoped解决样式冲突

![image-20230818175205781](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818175205781.png)

![image-20230818175144209](https://ttqblogimg.oss-cn-beijing.aliyuncs.com/image-20230818175144209.png)

##### 2.组件的data函数
